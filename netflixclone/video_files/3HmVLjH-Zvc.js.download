;/*FB_PKG_DELIM*/

__d("WAWebFirstPartyStickerInfo.react",["fbt","WAWebButton.react","WAWebCmd","WAWebFavoriteStickerAction","WAWebFavoriteStickerCollection","WAWebFlex.react","WAWebMiscGatingUtils","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerPackCollectionMd","react","useWAWebEventTargetValue"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useEffect,m=150;function a(a){var b=a.stickerPackId,e=a.onStickerPackView,f=a.stickerPackViewDelay,g=a.sticker;a=a.showViewPackButton;var i=n(b),j;if(b){var l=function(a){a.stopPropagation(),e&&e(),f!=null?self.setTimeout(function(){return d("WAWebCmd").Cmd.openStickerPack(b)},f+m):d("WAWebCmd").Cmd.openStickerPack(b)};d("WAWebMiscGatingUtils").isFavoriteStickersEnabled()?g!=null&&(j=k.jsxs(d("WAWebFlex.react").FlexRow,{children:[a&&k.jsx(c("WAWebButton.react"),{onClick:l,type:"secondary",children:h._("__JHASH__TQ5Vdy6paun__JHASH__")}),d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(g.filehash)?k.jsx(c("WAWebButton.react"),{onClick:function(){return d("WAWebFavoriteStickerAction").removeStickerFromFavorites(g)},type:"secondary",children:h._("__JHASH__BJt9lxd0QDB__JHASH__")}):k.jsx(c("WAWebButton.react"),{onClick:function(){return d("WAWebFavoriteStickerAction").addStickerToFavorites(g)},type:"secondary",children:h._("__JHASH__-X2ztN-eWZf__JHASH__")})]})):j=a?k.jsx(c("WAWebButton.react"),{onClick:l,type:"secondary",children:h._("__JHASH__TQ5Vdy6paun__JHASH__")}):null}return k.jsxs(k.Fragment,{children:[k.jsx(d("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:i==null?void 0:i.name,publisher:i==null?void 0:i.publisher,theme:d("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer}),j]})}function n(a){l(function(){a&&d("WAWebStickerPackCollectionMd").StickerPackCollectionMd.fetchStickerPack(a)},[a]);var b=c("useWAWebEventTargetValue")(d("WAWebStickerPackCollectionMd").StickerPackCollectionMd,"add remove reset",function(){return a!=null?d("WAWebStickerPackCollectionMd").StickerPackCollectionMd.get(a):null});return b}g["default"]=a}),98);
__d("WAWebMoment-nn",["WAWeb-moment"],(function(a,b,c,d,e,f){b("WAWeb-moment").defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_m\xe5ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m\xe5._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m\xe5_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I g\xe5r klokka] LT",lastWeek:"[F\xf8reg\xe5ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein m\xe5nad",MM:"%d m\xe5nader",y:"eit \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}),null);
__d("WAWebDeactivateCommunityAction",["fbt","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebCommunityFlowLoadable","WAWebConfirmPopup.react","WAWebDrawerManager","WAWebFbtCommon","WAWebGroupCommunityJob","WAWebModalManager","WAWebNetworkStatus","WAWebToast.react","WAWebToastManager","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Community deactivation failed"]);j=function(){return a};return a}var k=i||c("react");function l(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),d("WAWebDrawerManager").DrawerManager.closeDrawerLeft(),d("WAWebDrawerManager").DrawerManager.openDrawerLeft(k.jsx(d("WAWebCommunityFlowLoadable").CommunityFlowLoadable,{}))}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("WAWebNetworkStatus").online){d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__rWPA9yqT2h___JHASH__")}));return}var e=a.id,f=d("WAWebGroupCommunityJob").sendDeactivateCommunity({parentGroupId:e});e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield f;return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__XUMBsM6hOFt__JHASH__",[h._param("community-name",a.formattedTitle)]))}catch(a){d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(a){d("WALogger").ERROR(j()).devConsole(a).sendLogs("community-deactivation-failed")})(a)}})();var g=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__6zb2GrgPMxr__JHASH__"));d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:g,pendingAction:e}));try{yield f,l()}catch(b){d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(b){b.status===401?d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH___nVYHnKtfBM__JHASH__")})):b.status===404?(l(),d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__gXtLwDH0JcU__JHASH__")}))):b.status===500&&d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{okText:c("WAWebFbtCommon")("Try again"),onOK:function(){d("WAWebModalManager").ModalManager.close(),m(a)},onCancel:function(){d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH__sECf4LFHWLC__JHASH__")}))})(b)}});return n.apply(this,arguments)}g["default"]=m}),98);
__d("WAWebCommunityDeactivationPopup.react",["fbt","WAWebConfirmPopup.react","WAWebDeactivateCommunityAction","WAWebModalManager","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){a=a.chat;var b=d("useWAWebModelValues").useModelValues(a,["id","formattedTitle"]);a=h._("__JHASH__NZCqIkNZs9I__JHASH__",[h._param("community-name",b.formattedTitle)]);var e=h._("__JHASH__ya3CqU0PyTQ__JHASH__",[h._param("community-name",b.formattedTitle)]),f=function(){d("WAWebModalManager").ModalManager.close()},g=function(){c("WAWebDeactivateCommunityAction")(b),d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:a,onOK:g,onCancel:f,okButtonType:"solidWarning",okText:h._("__JHASH__xJ5pNkmcUNX__JHASH__"),children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityInformationCell",["WAWebText.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={informationCell:{display:"x78zum5",marginTop:"xw7yly9",marginBottom:"x1yztbdb",width:"xh8yej3",$$css:!0},textAreaColumn:{flexGrow:"x1iyjqo2",marginStart:"x1d52u69",marginLeft:null,marginRight:null,marginEnd:"xktsk01",$$css:!0},title:{color:"xzwifym",lineHeight:"x37zpob",$$css:!0},iconColor:{color:"x16cd2qt",$$css:!0},subText:{paddingTop:"x1y1aw1k",$$css:!0},iconColumn:{paddingTop:"x1nn3v0j",width:"xvy4d1p",height:"xxk0z11",$$css:!0}};function a(a){var b=a.Icon,c=a.description;a=a.title;return i.jsxs("div",{className:"x78zum5 xw7yly9 x1yztbdb xh8yej3",children:[i.jsx("div",{className:"x1nn3v0j xvy4d1p xxk0z11",children:i.jsx(b,{width:24,height:24,iconXstyle:j.iconColor})}),i.jsxs("div",{className:"x1iyjqo2 x1d52u69 xktsk01",children:[i.jsx(d("WAWebText.react").TextParagraph,{xstyle:j.title,children:a}),i.jsx(d("WAWebText.react").TextParagraph,{theme:"muted",xstyle:j.subText,children:c})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityDeactivationInfoDrawer.react",["fbt","WAWebButton.react","WAWebCommunityDeactivationPopup.react","WAWebCommunityInformationCell","WAWebDeactivateBadgeDarkIcon","WAWebDeactivateBadgeIcon","WAWebDetailImage.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebEmojiText.react","WAWebFlex.react","WAWebFocusTracer","WAWebLinkCrossedIcon","WAWebModalManager","WAWebSpeakerCrossedIcon","WAWebText.react","WAWebThemeContext","WAWebTopMenuRedesignGatingUtils","WAWebTrashActiveIcon","WAWebUISpacing","react","useWAWebListener","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react"));b.forwardRef;var l=b.useContext,m=b.useEffect,n=b.useRef;e=k.forwardRef(a);var o={container:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",justifyContent:"xl56j7k",paddingTop:"x1miatn0",paddingEnd:"xs022h5",paddingBottom:"xuzjt68",paddingStart:"x8aayfw",$$css:!0},buttonContainer:{marginTop:"xw7yly9",textAlign:"x2b8uid",$$css:!0},header:{marginTop:"xqui205",marginBottom:"x1yztbdb",textAlign:"x2b8uid",lineHeight:"x1evy7pa",$$css:!0},badge:{zIndex:"xhtitgo",bottom:"xvp9gi2",end:"x4p3wbt",left:null,right:null,position:"x1n2onr6",marginEnd:"x1l75z5i",marginLeft:null,marginRight:null,$$css:!0}};function a(a,b){var e=a.chat,f=a.fromInfo;a=a.onBack;var g=d("useWAWebModelValues").useModelValues(e.contact,["id","name"]),i=l(d("WAWebThemeContext").ThemeContext);i=i.theme;var j=n();m(function(){c("WAWebFocusTracer").focus(j.current)},[]);d("useWAWebListener").useListener(d("WAWebModalManager").ModalManager,["close_modal"],function(){return c("WAWebFocusTracer").focus(j.current)});i=i==="dark";i=i?d("WAWebDeactivateBadgeDarkIcon").DeactivateBadgeDarkIcon:d("WAWebDeactivateBadgeIcon").DeactivateBadgeIcon;g=h._("__JHASH__GgnFIQgm12Y__JHASH__",[h._param("community-name",k.jsx(d("WAWebEmojiText.react").EmojiText,{text:g.name}))]);var p=h._("__JHASH__aWrLvJWmDIU__JHASH__"),q=[{title:h._("__JHASH__reZs4ttqv_c__JHASH__"),description:h._("__JHASH__28js9EAMKP7__JHASH__"),Icon:d("WAWebLinkCrossedIcon").LinkCrossedIcon},{title:h._("__JHASH__MnKwFZYQyqL__JHASH__"),description:h._("__JHASH__0TAK7nStNiP__JHASH__"),Icon:d("WAWebSpeakerCrossedIcon").SpeakerCrossedIcon},{title:h._("__JHASH__U7h-8GPpJgH__JHASH__"),description:h._("__JHASH__0fNCZiELZPy__JHASH__"),Icon:d("WAWebTrashActiveIcon").TrashActiveIcon}],r=function(){d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebCommunityDeactivationPopup.react"),{chat:e}))};return k.jsxs(c("WAWebDrawer.react"),{ref:b,testid:void 0,children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__7BwpXla-OjZ__JHASH__"),type:f||d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.LARGE,onBack:a}),k.jsx(c("WAWebDrawerBody.react"),{ref:j,tabIndex:"-1",children:k.jsxs(c("WAWebDrawerSection.react"),{animation:!1,xstyle:o.container,children:[k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",children:[k.jsx(d("WAWebDetailImage.react").DetailImage,{id:e.id,size:104,quality:d("WAWebDetailImage.react").DetailImageQuality.High,shape:d("WAWebDetailImage.react").DetailImageShape.Squircle}),k.jsx(i,{width:36,height:36,xstyle:o.badge})]}),k.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",children:k.jsx(d("WAWebText.react").TextHeader,{xstyle:o.header,size:"24",color:"dark",weight:"bold",children:g})}),k.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",xstyle:d("WAWebUISpacing").uiMargin.bottom16,children:k.jsx(d("WAWebText.react").TextHeader,{theme:"title",children:p})}),q.map(function(a){var b=a.title,d=a.description;a=a.Icon;return k.jsx(c("WAWebCommunityInformationCell"),{Icon:a,title:b,description:d},b)}),k.jsx(d("WAWebFlex.react").FlexRow,{xstyle:o.buttonContainer,children:k.jsx(c("WAWebButton.react"),{testid:void 0,type:"solidWarning",onClick:r,children:h._("__JHASH__a1uOm1u8TWx__JHASH__")})})]})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e;g["default"]=b}),98);
__d("WAWebDeactivateCommunityDrawer.react",["WAWebCommunityDeactivationInfoDrawer.react","WAWebDrawerManager","react","useWAWebCallbackOnce"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react");a=(h||(h=d("react"))).forwardRef;b=a(function(a,b){var e=c("useWAWebCallbackOnce")(function(){a.onBack?a.onBack():d("WAWebDrawerManager").DrawerManager.closeDrawerLeft()});return j.jsx(c("WAWebCommunityDeactivationInfoDrawer.react"),{ref:b,onBack:e,chat:a.chat,fromInfo:(b=a.fromInfo)!=null?b:!1})});e=b;g["default"]=e}),98);
__d("WAWebMediaAudio.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={mediaViewerPlaceholder:"_alfz",imageAudio:"_alfy",mediaViewerAudio:"_alfx"};b=a;g["default"]=b}),98);
__d("WAWebMediaAudio.react",["fbt","WAWebClassnames","WAWebMediaAudio.scss","WAWebMediaUrlProvider","WAWebPttAudioTag.react","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(a){a.stopPropagation()};function l(a){var b=a.msg;a=a.url;return j.jsx(d("WAWebPttAudioTag.react").AudioTag,{url:a,className:c("WAWebMediaAudio.scss").mediaViewerAudio,onClick:k,autoPlay:!0,msg:b,controls:!0,testId:"media-audio",children:h._("__JHASH__M0oEh1ph3Ob__JHASH__")})}l.displayName=l.name+" [from "+f.id+"]";function m(){return j.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaAudio.scss").imageAudio,c("WAWebMediaAudio.scss").mediaViewerPlaceholder),onClick:k})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.mediaData,e=a.msg;a=d("useWAWebModelValues").useModelValues(b,["mediaStage","renderableUrl"]);return j.jsx(c("WAWebMediaUrlProvider"),{mediaData:a,placeholderRenderer:m,children:function(a){return j.jsx(l,{url:a,msg:e})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaViewerReportSpamPopup.react",["fbt","WAWebCheckBox.react","WAWebConfirmPopup.react","WAWebText.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(i||(i=d("react"))).useState,n={section:{marginBottom:"xod5an3",$$css:!0},checkboxLabel:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,$$css:!0},border:{paddingBottom:"x1ehvx8p",borderBottom:"x11k6ktl",$$css:!0}};function a(a){var b=a.isBizBot3p,e=a.isBusiness;a.isGroup;var f=a.onCancel,g=a.onReport;a=a.title;var i=m(!1),k=i[0],o=i[1];function p(){g(k)}e?(i=h._("__JHASH__aNKVk1rMfbv__JHASH__"),e=h._("__JHASH__Rmz5ScsiIKl__JHASH__")):b?(i=h._("__JHASH__Y6yJLOH1ef-__JHASH__"),e=h._("__JHASH__MCC4xfLuM_j__JHASH__")):(i=h._("__JHASH__t3G_oouqZ1X__JHASH__"),e=h._("__JHASH__N8yefZkaTc7__JHASH__"));return l.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:p,okText:h._("__JHASH__lmNWNj4RDIv__JHASH__"),onCancel:f,title:a,children:[l.jsxs("div",{className:(j||(j=c("stylex")))(n.section,d("WAWebUISpacing").uiMargin.top12,d("WAWebUISpacing").uiMargin.end0,n.border),children:[l.jsx(d("WAWebCheckBox.react").CheckBox,{onChange:function(){return o(function(a){return!a})},checked:k,id:"menu-icon-report-spam"}),l.jsx(d("WAWebText.react").TextLabel,{xstyle:n.checkboxLabel,htmlFor:"menu-icon-report-spam",children:e})]}),l.jsx(d("WAWebText.react").TextParagraph,{xstyle:n.section,color:"muted",children:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebReportNewsletterPostSpamButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportNewsletterPostPopup.react","WAWebSpamConstants","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.msg,e=d("WAWebFrontendMsgGetters").getChat(b);a=function(){d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebReportNewsletterPostPopup.react"),{chat:e,msg:b,spamFlow:d("WAWebSpamConstants").SpamFlow.MediaViewer}))};return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,children:h._("__JHASH__WjXLG2s6FNr__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebSendForAdminReviewButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportToAdminEventsLogger","WAWebReportToAdminPopup.react","WAWebWamEnumReportToAdminInteraction","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.msg;a=function(){d("WAWebReportToAdminEventsLogger").logRTAReportingEvent({reportToAdminInteraction:d("WAWebWamEnumReportToAdminInteraction").REPORT_TO_ADMIN_INTERACTION.CLICK_SEND_FOR_ADMIN_REVIEW,groupId:d("WAWebFrontendMsgGetters").getChat(b).id.user}),d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebReportToAdminPopup.react"),{msg:b}))};return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,children:h._("__JHASH__jyK71WAdXyH__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaPanelHeader.react",["fbt","$InternalEnum","WALogger","WAPromiseDelays","WAWebBubbleIcon","WAWebCellFrame.react","WAWebChatMessageSearch","WAWebClock","WAWebCmd","WAWebColumnChangeDispatch","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebDeleteIcon","WAWebDeleteRevokeMsgFlow.react","WAWebDetailImage.react","WAWebDownloadIcon","WAWebDrawerManager","WAWebDropdown.react","WAWebDropdownItem.react","WAWebEmojiText.react","WAWebFbtCommon","WAWebFileSaver","WAWebFlex.react","WAWebForwardIcon","WAWebForwardMessageModalLoadable","WAWebFrontendMsgGetters","WAWebKeepInChatActions","WAWebKeepInChatMediaIcon","WAWebMediaPanelHeader.scss","WAWebMediaTypes","WAWebMediaViewerConstants","WAWebMediaViewerReportSpamPopup.react","WAWebMenuBar.react","WAWebMenuIcon","WAWebMessageMeta.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebMsgActionCapability","WAWebMsgGetters","WAWebMsgReply","WAWebMsgType","WAWebMsgViewCount","WAWebNewsletterGatingUtils","WAWebPinInChatCollection","WAWebPinMessageModal.react","WAWebPinned3Icon","WAWebPinnedMessagesUserJourneyLogger","WAWebProtobufsE2E.pb","WAWebReactionsMediaIcon","WAWebReactionsPanel.react","WAWebReactionsUtils","WAWebReplyIcon","WAWebReplyToMsgChatAction","WAWebReportNewsletterPostSpamButton.react","WAWebRevokeMetricUtils","WAWebSendForAdminReviewButton.react","WAWebSendPinMessageAction","WAWebSendReactionMsgAction","WAWebSendReactionsTray","WAWebSendReactionsTrayContainer","WAWebSendSpamChatAction","WAWebSpamConstants","WAWebStarBtnIcon","WAWebStateUtils","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebUndoKeepInChatMediaIcon","WAWebUnpinnedIcon","WAWebUnstarBtnIcon","WAWebViewOnceIcon","WAWebWamEnumKicEntryPointType","WAWebXViewerIcon","react","useWAWebIsPinnedMsg","useWAWebListener","useWAWebModelValues","useWAWebMsgValues","useWAWebStableCallback"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error while unpinning a message: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendReactionMsg: error sending from media modal ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendReactionMsg picker: error ",""]);m=function(){return a};return a}e=j||d("react");var n=i||(i=c("react")),o=e.useRef,p=e.useState,q=b("$InternalEnum").Mirrored(["MenuBar","Dropdown"]);function r(a){var b=d("WAWebFrontendMsgGetters").getChat(a);b.composeQuotedMsg=a;d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)}function s(a){return h._("__JHASH__6-_TLd9jBM6__JHASH__",[h._param("contact_name",a.displayName())])}s.displayName=s.name+" [from "+f.id+"]";function a(a){var b,e=a.msg,f=a.onHightlightCloseEnd,g=a.msgIndexInAlbum,h=a.onViewOnceInfoClick,i=a.onClose,j=o(null);b=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(b=d("WAWebMsgGetters")).getId,b.getStar,b.getIsGroupMsg,b.getType,b.getIsGif,b.getIsViewOnce,b.getSender,d("WAWebFrontendMsgGetters").getSenderObj,b.getT,b.getIsSentByMe,b.getIsStickerMsg,b.getBroadcastId,d("WAWebFrontendMsgGetters").getIsUnsentMedia,b.getIsKept,b.getMessageSecret,b.getIsCarouselCard]);b[0];b[1];var k=b[2];b[3];b[4];var q=b[5],r=b[6];b[7];var s=b[8];b[9];b[10];b[11];b[12];b[13];b[14];b[15];b=d("WAWebMsgViewCount").useWAWebLocalizedViewCount(e.id);var t=d("WAWebFrontendMsgGetters").getChat(e),u=d("useWAWebModelValues").useModelValues(a.mediaData,["filehash","mediaStage","renderableUrl"]),v=p(null),w=v[0],x=v[1];v=p(null);var y=v[0],z=v[1],A=o(null),B=function(){x(null)},C=function(){z(null)},D=c("useWAWebStableCallback")(function(a){if(!d("WAWebReactionsUtils").canReactToMessage(a))return;var b=function(b){d("WAWebSendReactionMsgAction").sendReactionToMsg(a,b)["catch"](function(a){d("WALogger").DEV(m(),a)}),C()};z({dirY:d("WAWebDropdown.react").DirY.BOTTOM,dirX:d("WAWebDropdown.react").DirX.CENTER,type:d("WAWebDropdown.react").MenuType.ReactionPicker,menu:n.jsx(d("WAWebReactionsPanel.react").ReactionsPanel,{msgId:a.id.toString(),onSelection:b}),flipOnRTL:!0,anchor:A.current})});v=function(){if(!d("WAWebReactionsUtils").canReactToMessage(e))return;var a=function(a){a!==d("WAWebSendReactionsTray").MORE_REACTIONS?d("WAWebSendReactionMsgAction").sendReactionToMsg(e,a)["catch"](function(a){d("WALogger").DEV(l(),a)}):self.setTimeout(function(){D(e)},150),B()};a={dirY:d("WAWebDropdown.react").DirY.BOTTOM,dirX:d("WAWebDropdown.react").DirX.CENTER,type:d("WAWebDropdown.react").MenuType.ReactionSendTray,menu:n.jsx(d("WAWebSendReactionsTrayContainer").SendReactionsTrayContainer,{msg:e,selectedCallback:a}),flipOnRTL:!1,anchor:A.current};x(a)};d("useWAWebListener").useListener(j.current,"animationend",function(){f()});var E=e.displayName({showShortName:!0,withPushName:!0});k&&(E+=" @ "+t.title());k=function(){if(q)return!1;return!d("WAWebMsgActionCapability").canDownloadMsg(e)?!1:!!u.renderableUrl||u.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED};j=n.jsx(d("WAWebXViewerIcon").XViewerIcon,{className_DONOTUSE:a.isHighlightClose?c("WAWebMediaPanelHeader.scss").highlightClose:null,containerRef:j});var F;w?F=n.jsx(d("WAWebUimUie.react").UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:B,children:n.jsx(c("WAWebUimUieMenu.react"),{contextMenu:w})}):y&&(F=n.jsx(d("WAWebUimUie.react").UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:C,children:n.jsx(c("WAWebUimUieMenu.react"),{contextMenu:y})}));y=d("WAWebNewsletterGatingUtils").isNewsletterViewCountEnabled(t==null?void 0:(w=t.newsletterMetadata)==null?void 0:w.membershipType)&&b!=null?n.jsxs(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaPanelHeader.scss").viewCount,children:[d("WAWebClock").Clock.relativeDateAndTimeStr(s),n.jsx(d("WAWebMessageMeta.react").MetaBullet,{}),n.jsx("span",{children:b})]}):n.jsx(n.Fragment,{children:d("WAWebClock").Clock.relativeDateAndTimeStr(s)});return n.jsxs("div",{className:c("WAWebMediaPanelHeader.scss").mediaPanelHeader,children:[n.jsx("div",{className:c("WAWebMediaPanelHeader.scss").info,children:n.jsx(c("WAWebCellFrame.react"),{idle:!0,image:n.jsx(d("WAWebDetailImage.react").DetailImage,{id:r,size:40}),primary:n.jsx(d("WAWebEmojiText.react").EmojiText,{ellipsify:!0,text:E}),secondary:y,theme:"media"})}),n.jsx("div",{className:c("WAWebMediaPanelHeader.scss").mediaPanelTools,children:n.jsxs(d("WAWebMenuBar.react").MenuBar,{theme:"strong",children:[n.jsx(H,{isMediaDownloadable:k,msg:e,msgIndexInAlbum:g,onClose:i,onViewOnceInfoClick:h,openReactionTray:v,sendReactionButtonRef:A}),n.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:j,title:c("WAWebFbtCommon")("Close"),onClick:a.onClose})]},"media-panel-header")}),F]})}a.displayName=a.name+" [from "+f.id+"]";function t(a){var b=a.isMediaDownloadable,c=a.msg,e=a.onClose,f=a.openReactionTray;a=a.sendReactionButtonRef;return n.jsxs(n.Fragment,{children:[d("WAWebMsgReply").canReplyMsg(c)?n.jsx(w,{msg:c,onClose:e}):null,d("WAWebMsgActionCapability").canStarMsg(c)?n.jsx(B,{msg:c}):null,c.canShowKeepOrUnkeepOption()?n.jsx(A,{msg:c}):null,d("WAWebMsgActionCapability").canPinMsg(c)?n.jsx(C,{msg:c}):null,d("WAWebReactionsUtils").canReactToMessage(c)?n.jsx(z,{msg:c,openReactionTray:f,sendReactionButtonRef:a}):null,n.jsx(x,{msg:c,onClose:e}),d("WAWebMsgActionCapability").canForwardMsg(c)?n.jsx(D,{msg:c}):null,n.jsx(I,{isMediaDownloadable:b,isAlbumMedia:!0,msg:c,onClose:e})]})}t.displayName=t.name+" [from "+f.id+"]";function u(a){var b=a.isMediaDownloadable,c=a.msg,e=a.onClose,f=a.openReactionTray;a=a.sendReactionButtonRef;return n.jsxs(n.Fragment,{children:[!d("WAWebMsgGetters").getIsStickerMsg(c)&&!d("WAWebMsgGetters").getIsCarouselCard(c)?n.jsx(v,{msg:c,type:q.MenuBar,onClose:e}):null,d("WAWebMsgGetters").getIsStickerMsg(c)&&!d("WAWebMsgGetters").getIsCarouselCard(c)&&!d("WAWebMsgGetters").getIsNewsletterMsg(c)?n.jsx(w,{msg:c,onClose:e}):null,d("WAWebMsgActionCapability").canStarMsg(c)?n.jsx(B,{msg:c}):null,d("WAWebMsgActionCapability").canPinMsg(c)?n.jsx(C,{msg:c}):null,c.canShowKeepOrUnkeepOption()?n.jsx(A,{msg:c}):null,d("WAWebMsgGetters").getIsStickerMsg(c)?n.jsx(x,{msg:c,onClose:e}):null,d("WAWebReactionsUtils").canReactToMessage(c)?n.jsx(z,{msg:c,openReactionTray:f,sendReactionButtonRef:a}):null,d("WAWebMsgActionCapability").canForwardMsg(c)?n.jsx(D,{msg:c}):null,d("WAWebMsgGetters").getIsStickerMsg(c)?null:n.jsx(y,{isMediaDownloadable:b,msg:c,type:q.MenuBar}),d("WAWebMsgActionCapability").canReportMsg(c)&&d("WAWebMiscGatingUtils").messageLevelReportingEnabled()?n.jsx(I,{isMediaDownloadable:b,isAlbumMedia:!1,msg:c,onClose:e}):null]})}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b=a.msg,c=a.onClose;a=a.type;var e=function(a){a.stopPropagation();c();d("WAWebDrawerManager").DrawerManager.existsDrawerRight(function(a){a&&d("WAWebColumnChangeDispatch").Column.column===2&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight()});a=d("WAWebChatMessageSearch").getSearchContext(d("WAWebFrontendMsgGetters").getChat(b),d("WAWebStateUtils").unproxy(b));d("WAWebCmd").Cmd.openChatAt(d("WAWebFrontendMsgGetters").getChat(b),a).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(d("WAWebFrontendMsgGetters").getChat(b))})};return a===q.Dropdown?n.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:e,children:h._("__JHASH__KuFWxfwvLor__JHASH__")}):n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebBubbleIcon").BubbleIcon,{}),title:h._("__JHASH__KuFWxfwvLor__JHASH__"),onClick:e})}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=a.msg,c=a.onClose;a=function(a){c(),d("WAPromiseDelays").delayMs(d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION).then(r.bind(null,d("WAWebStateUtils").unproxy(b)))};return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebReplyIcon").ReplyIcon,{}),title:h._("__JHASH__9qwPCOZrFoa__JHASH__"),onClick:a})}w.displayName=w.name+" [from "+f.id+"]";function x(a){var b=a.msg,e=a.onClose;a=function(a){d("WAWebModalManager").ModalManager.open(n.jsx(c("WAWebDeleteRevokeMsgFlow.react"),{chat:d("WAWebFrontendMsgGetters").getChat(b),msgList:[d("WAWebStateUtils").unproxy(b)],onDelete:e})),d("WAWebRevokeMetricUtils").UiRevokeActionHelper.startSession(),d("WAWebRevokeMetricUtils").UiRevokeActionHelper.messageSelected()};return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebDeleteIcon").DeleteIcon,{}),title:h._("__JHASH__8pjXYHXR62r__JHASH__"),onClick:a})}x.displayName=x.name+" [from "+f.id+"]";function y(a){var b=a.isMediaDownloadable,c=a.msg;a=a.type;var e=function(a){a.stopPropagation(),d("WAWebFileSaver").FileSaver.initDownload(d("WAWebStateUtils").unproxy(c))};return!b()?null:a===q.Dropdown?n.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:e,disabled:!b(),children:h._("__JHASH__etJJN4WjI71__JHASH__")}):n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebDownloadIcon").DownloadIcon,{}),title:h._("__JHASH__etJJN4WjI71__JHASH__"),disabled:!b(),onClick:e})}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=a.msg,c=a.openReactionTray;a=a.sendReactionButtonRef;return b.type===d("WAWebMsgType").MSG_TYPE.STICKER?null:n.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:n.jsx(d("WAWebReactionsMediaIcon").ReactionsMediaIcon,{containerRef:a,width:20}),title:h._("__JHASH__AxiUt4Efrtn__JHASH__"),onClick:function(){c()}})}z.displayName=z.name+" [from "+f.id+"]";function A(a){var b=a.msg,c,e;a=function(a){a.stopPropagation(),d("WAWebKeepInChatActions").runKeepInChatUX(d("WAWebStateUtils").unproxy(b),d("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)};var f=function(a){a.stopPropagation(),d("WAWebKeepInChatActions").runUndoKeepInChatUX(d("WAWebStateUtils").unproxy(b),d("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)};if(d("WAWebMsgGetters").getIsKept(b)&&b.canShowUnkeepOption())c=n.jsx(d("WAWebUndoKeepInChatMediaIcon").UndoKeepInChatMediaIcon,{}),f=f,e=h._("__JHASH__0tBDsA2BjAm__JHASH__");else if(!d("WAWebMsgGetters").getIsKept(b)&&b.canShowKeepOption())c=n.jsx(d("WAWebKeepInChatMediaIcon").KeepInChatMediaIcon,{}),f=a,e=h._("__JHASH__S0WteKlS92G__JHASH__");else return null;return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:c,title:e,onClick:f},c)}A.displayName=A.name+" [from "+f.id+"]";function B(a){var b=a.msg,c,e;b.star?(a=function(a){a.stopPropagation(),d("WAWebCmd").Cmd.sendUnstarMsgs(d("WAWebFrontendMsgGetters").getChat(b),[d("WAWebStateUtils").unproxy(b)])},c=n.jsx(d("WAWebUnstarBtnIcon").UnstarBtnIcon,{}),e=h._("__JHASH__X3QIRH8IFsq__JHASH__",[h._plural(1)])):(a=function(a){a.stopPropagation(),d("WAWebCmd").Cmd.sendStarMsgs(d("WAWebFrontendMsgGetters").getChat(b),[d("WAWebStateUtils").unproxy(b)])},c=n.jsx(d("WAWebStarBtnIcon").StarBtnIcon,{}),e=h._("__JHASH__TWFJFniUvZ8__JHASH__",[h._plural(1)]));return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:c,title:e,onClick:a},e)}B.displayName=B.name+" [from "+f.id+"]";function C(a){var b=a.msg,e,f;a=c("useWAWebIsPinnedMsg")(b.id);var g=d("WAWebFrontendMsgGetters").getChat(b);a?(a=function(a){a.stopPropagation();a=d("WAWebPinInChatCollection").PinInChatCollection.getByParentMsgKey(b.id);new(d("WAWebPinnedMessagesUserJourneyLogger").PinnedMessagesUserJourneyLogger)(g).messageMenuClickUnpin(b,a);d("WAWebSendPinMessageAction").sendPinInChatMsg(b,d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNPIN_FOR_ALL)["catch"](function(a){d("WALogger").ERROR(k(),a)})},e=n.jsx(d("WAWebUnpinnedIcon").UnpinnedIcon,{}),f=h._("__JHASH__XuVJ2Ajwezd__JHASH__")):(a=function(a){a.stopPropagation();a=new(d("WAWebPinnedMessagesUserJourneyLogger").PinnedMessagesUserJourneyLogger)(g);a.messageMenuClickPin(b);d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebPinMessageModal.react").PinMessageModal,{msg:b,logger:a}))},e=n.jsx(d("WAWebPinned3Icon").Pinned3Icon,{}),f=h._("__JHASH___Vn1D1cUr8x__JHASH__"));return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:e,title:f,onClick:a},f)}C.displayName=C.name+" [from "+f.id+"]";function D(a){var b=a.msg;a=function(a){a.stopPropagation(),d("WAWebFrontendMsgGetters").getIsUnsentMedia(b)?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__vki0y8Z9eIc__JHASH__"),onOK:function(){return d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__eMwcRvhni12__JHASH__",[h._plural(1)])})):d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebForwardMessageModalLoadable").ForwardMessageModalLoadable,{msgs:[d("WAWebStateUtils").unproxy(b)],onClose:function(){return d("WAWebModalManager").ModalManager.close()}}),{transition:"modal-flow"})};return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebForwardIcon").ForwardIcon,{}),title:h._("__JHASH__yncEhAlcaY6__JHASH__"),onClick:a})}D.displayName=D.name+" [from "+f.id+"]";function E(a){var b=a.msg;a=function(){c("WAWebReplyToMsgChatAction")(b)};return n.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:a,children:h._("__JHASH__dS67_Denh_O__JHASH__")})}E.displayName=E.name+" [from "+f.id+"]";function F(a){var b=a.msg,e=function(a){!a?d("WAWebSendSpamChatAction").sendMessageReport(b,d("WAWebSpamConstants").SpamFlow.MediaViewer):d("WAWebSendSpamChatAction").sendMessageReportBlock(b,d("WAWebSpamConstants").SpamFlow.MediaViewer),d("WAWebModalManager").ModalManager.close()};a=function(){var a;d("WAWebModalManager").ModalManager.open(n.jsx(c("WAWebMediaViewerReportSpamPopup.react"),{isBusiness:b.senderObj.isBusiness,isGroup:d("WAWebFrontendMsgGetters").getChat(b).isGroup,isBizBot3p:(a=(a=d("WAWebFrontendMsgGetters").getChat(b).contact.businessProfile)==null?void 0:a.isBizBot3p)!=null?a:!1,onReport:e,onCancel:function(){return d("WAWebModalManager").ModalManager.close()},title:s(b)}))};return n.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,children:s(b)})}F.displayName=F.name+" [from "+f.id+"]";function G(a){var b=a.msg,c=a.onClose;a=function(a){c(),d("WAPromiseDelays").delayMs(d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION+250).then(d("WAWebCmd").Cmd.msgInfoDrawer.bind(d("WAWebCmd").Cmd,d("WAWebStateUtils").unproxy(b)))};return n.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,children:h._("__JHASH__6ZxqC6H3okB__JHASH__")})}G.displayName=G.name+" [from "+f.id+"]";function H(a){var b=a.isMediaDownloadable,c=a.msg,d=a.msgIndexInAlbum,e=a.onClose,f=a.onViewOnceInfoClick,g=a.openReactionTray;a=a.sendReactionButtonRef;return c.isViewOnce?n.jsx(J,{isMediaDownloadable:b,msg:c,onClose:e,onViewOnceInfoClick:f}):d>=0?n.jsx(t,{isMediaDownloadable:b,msg:c,onClose:e,openReactionTray:g,sendReactionButtonRef:a}):n.jsx(u,{isMediaDownloadable:b,msg:c,onClose:e,openReactionTray:g,sendReactionButtonRef:a})}H.displayName=H.name+" [from "+f.id+"]";function I(a){var b=a.isAlbumMedia,e=a.isMediaDownloadable,f=a.msg;a=a.onClose;var g=[],i=d("WAWebFrontendMsgGetters").getChat(f);(d("WAWebMsgReply").canPrivateReply(f)||d("WAWebMsgReply").canPrivateReplyInRestrictedGrp(f))&&g.push(n.jsx(E,{msg:f},"private_reply"));b&&(d("WAWebMsgGetters").getIsSentByMe(f)&&g.push(n.jsx(G,{msg:f,onClose:a},"dropdownMsgInfo")),g.push(n.jsx(v,{msg:f,type:q.Dropdown,onClose:a},"dropdownGoToMsg"),n.jsx(y,{isMediaDownloadable:e,msg:f,type:q.Dropdown},"dropdownDownload")));b=!i.isNewsletter&&(f.isViewOnce||d("WAWebMsgActionCapability").canReportMsg(f)&&d("WAWebMiscGatingUtils").messageLevelReportingEnabled());a=i.isNewsletter&&d("WAWebMsgActionCapability").canReportMsg(f)&&d("WAWebNewsletterGatingUtils").isNewsletterReportingEnabled();a?g.push(n.jsx(c("WAWebReportNewsletterPostSpamButton.react"),{msg:f},"reportSpam")):b&&g.push(n.jsx(F,{msg:f},"reportSpam"));d("WAWebMsgActionCapability").canReportToAdmin(f)&&g.push(n.jsx(c("WAWebSendForAdminReviewButton.react"),{msg:f},"report_to_admin"));return n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebMenuIcon").MenuIcon,{}),title:h._("__JHASH__hskmX_lsgx4__JHASH__"),children:n.jsx(d("WAWebDropdown.react").Dropdown,{type:d("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:d("WAWebDropdown.react").DirX.LEFT,children:g})})}I.displayName=I.name+" [from "+f.id+"]";function J(a){var b=a.isMediaDownloadable,e=a.msg,f=a.onClose;a=a.onViewOnceInfoClick;return n.jsxs(n.Fragment,{children:[n.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:n.jsx(d("WAWebViewOnceIcon").ViewOnceIcon,{className_DONOTUSE:c("WAWebMediaPanelHeader.scss").voIcon}),title:h._("__JHASH___aQZUFw2Yay__JHASH__"),onClick:a}),n.jsx(I,{isMediaDownloadable:b,isAlbumMedia:!1,msg:e,onClose:f})]})}J.displayName=J.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaSticker.react",["Promise","WAWebFirstPartyStickerInfo.react","WAWebFlex.react","WAWebImg.react","WAWebLottieSticker.react","WAWebLottieStickersGatingUtils","WAWebMediaUrlProvider","WAWebMediaViewerStyles","WAWebMediaZoomable.react","WAWebNewsletterCollection","WAWebNewsletterMembershipUtil","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerLikeMsgPlaceholder.react","WAWebStickerModel","WAWebStickerUtils","WAWebWamEnumWebcRmrReasonCode","react","stylex","useWAWebMergeRefs","useWAWebModelValues"],(function(a,b,c,d,e,f,g){var h,i,j,k;a=k||d("react");var l=j||(j=c("react"));e=a.forwardRef;var m=a.useRef,n=376,o={container:{width:"xh8yej3",height:"x5yr21d",$$css:!0},stickerContainer:{maxWidth:"xlnrm6",maxHeight:"xjkwb7i",marginBottom:"x1iymm2a",zIndex:"xyw6214",$$css:!0}};f=function(a,e){var f=a.msg,g=d("useWAWebModelValues").useModelValues(a.mediaData,["encFilehash","directPath","filehash","mediaKey","mediaKeyTimestamp","mediaStage","mimetype","fullWidth","fullHeight","isFirstParty","isAvatar","stickerPackId","stickerPackName","stickerPackPublisher","extractedLottieSticker"]),j=m(null);e=c("useWAWebMergeRefs")(e,j);var k=function(a){var b;(b=j.current)==null?void 0:b.onClick(a)},p=function(){return f?f.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}):(h||(h=b("Promise"))).resolve()},q=c("WAWebNewsletterCollection").getActive(),r=d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(q==null?void 0:q.newsletterMetadata);q=g.isFirstParty?l.jsx(c("WAWebFirstPartyStickerInfo.react"),{stickerPackId:g.stickerPackId,onStickerPackView:a.onStickerPackView,stickerPackViewDelay:a.stickerPackViewDelay,showViewPackButton:q!=null?g.isAvatar!==!0&&r:g.isAvatar!==!0,sticker:new(d("WAWebStickerModel").StickerModel)({id:g.filehash,mimetype:g.mimetype,width:g.fullWidth,height:g.fullHeight,filehash:g.filehash,encFilehash:g.encFilehash,directPath:g.directPath,mediaKey:g.mediaKey,mediaKeyTimestamp:g.mediaKeyTimestamp})}):l.jsx(d("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:g.stickerPackName,publisher:g.stickerPackPublisher,theme:d("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer,sticker:new(d("WAWebStickerModel").StickerModel)({id:g.filehash,mimetype:g.mimetype,width:g.fullWidth,height:g.fullHeight,filehash:g.filehash,encFilehash:g.encFilehash,directPath:g.directPath,mediaKey:g.mediaKey,mediaKeyTimestamp:g.mediaKeyTimestamp})});r=l.jsx(c("WAWebMediaUrlProvider"),{mediaData:g,placeholderRenderer:function(){return l.jsx(c("WAWebStickerLikeMsgPlaceholder.react"),{size:n})},downloadMedia:p,children:function(b){return l.jsx(c("WAWebImg.react"),{className:(i||(i=c("stylex")))(c("WAWebMediaViewerStyles").content),onClick:k,src:b,onLoad:a.onLoad})}});d("WAWebStickerUtils").getStickerFileType(g.mimetype)===d("WAWebStickerUtils").StickerFileType.LOTTIE&&(d("WAWebLottieStickersGatingUtils").isLottieStickerReceivingEnabled()?r=l.jsx(c("WAWebLottieSticker.react"),{className:"",mediaData:g,startAnimation:!0,onClick:k,placeholderRenderer:function(){return null},downloadMedia:p}):r=l.jsx(c("WAWebStickerLikeMsgPlaceholder.react"),{size:n}));return l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",justify:"center",xstyle:o.container,children:[l.jsx("div",{className:"xh8yej3 x5yr21d xlnrm6 xjkwb7i x1iymm2a xyw6214","data-testid":void 0,children:l.jsx(c("WAWebMediaZoomable.react"),{ref:e,width:g.fullWidth,height:g.fullHeight,onZoomIn:a.onImgZoomIn,msg:f,children:r})}),q]})};a=e(f);g["default"]=a}),98);
__d("WAWebMediaViewerMediaVideo.react",["fbt","WAWebAddOnBubbleType","WAWebAddOnBubblesContainer.react","WAWebAnnotation.react","WAWebBlurredImage.react","WAWebGetDisplayType","WAWebMediaTypes","WAWebMediaViewerStyles","WAWebMsgGetters","WAWebObjectFit.react","WAWebPipConst","WAWebPipFloatingVideoPlayer.react","WAWebPipMsgVideoPlayer.react","WAWebReactionsBubbleContainer.react","WAWebReactionsUtils","WAWebVideo.react","WAWebWamEnumWebcRmrReasonCode","isNonZeroNumber","react","stylex","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useEffect,n=b.useImperativeHandle,o=b.useMemo,p=b.useRef,q=b.useState;function a(a,b){var e=a.autoPlay,f=a.msg,g=a.onLoad,i=a.onClose,k=a.onLoadedData,t=a.startTime;t=t===void 0?0:t;var u=d("useWAWebModelValues").useModelValues(a.mediaData,["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]);a=q(!1);var v=a[0],w=a[1];a=q(!0);var x=a[0],y=a[1],z=p();a=o(function(){return(u.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED||u.streamable&&u.isStreamable())&&d("isNonZeroNumber").isNonZeroNumber(u.fullWidth)&&d("isNonZeroNumber").isNonZeroNumber(u.fullHeight)?r(u):{width:0,height:0}},[u]);m(function(){if(!u.isStreamable()){f.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0});return function(){f.mediaObject&&f.cancelDownload()}}},[]);var A=function(a){w(a)};n(b,function(){return{getContainerElement:function(){return z.current},closingMedia:function(){y(!1)}}});b=u.isGif;var B=u.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED||u.streamable&&u.isStreamable();B=B||f.isForcingRMR();var C=null,D=d("WAWebGetDisplayType").getDisplayType(f),E=d("WAWebAddOnBubbleType").AddOnBubbleType.MEDIA_VIEWER;f&&d("WAWebReactionsUtils").shouldShowReactionBubble(f,E)&&(C=l.jsx(c("WAWebAddOnBubblesContainer.react"),{isOutgoingMsg:d("WAWebMsgGetters").getIsSentByMe(f),displayType:D,bubbleType:E,children:l.jsx(d("WAWebReactionsBubbleContainer.react").ReactionBubbleContainer,{msgIds:[f.id.toString()],isOutgoingMsg:d("WAWebMsgGetters").getIsSentByMe(f),displayType:D,reactionBubbleType:E,reactionBubbleVisible:x})}));if(B){D=h._("__JHASH__bqPn8SMV9PB__JHASH__");var F;!v&&(f==null?void 0:f.interactiveAnnotations)&&f.interactiveAnnotations.length>0&&(F=l.jsx(c("WAWebAnnotation.react"),{annotations:f.interactiveAnnotations}));b?E=l.jsxs("div",{className:(j||(j=c("stylex")))(c("WAWebMediaViewerStyles").content),ref:z,"data-testid":void 0,children:[l.jsx(c("WAWebVideo.react"),{src:u.renderableUrl,onClick:s,autoPlay:!0,loop:!0,onLoadedData:k,children:D}),F]}):E=l.jsx("div",{ref:z,className:(j||(j=c("stylex")))(c("WAWebMediaViewerStyles").content),onClick:s,"data-testid":void 0,children:l.jsx(d("WAWebPipMsgVideoPlayer.react").WrappedMsgVideoPlayer,{msg:f,mediaData:u,startTime:t,onClose:i,onError:function(){},onFullscreenToggle:A,autoPlay:e,type:d("WAWebPipConst").PlayerType.MEDIA_VIEWER,overlays:F,noPip:f.isViewOnce,onLoadedData:k})});return l.jsxs(c("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:a,onObjectLoad:g,children:[E,C]})}return l.jsxs(c("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:u.fullWidth,height:u.fullHeight},children:[l.jsx(c("WAWebBlurredImage.react"),{altText:(x=f.caption)!=null?x:"",mediaData:u}),C]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);function r(a){if(a.isGif){var b=330;return a.fullWidth>=b?{width:a.fullWidth,height:a.fullHeight}:{width:b,height:a.fullHeight*b/a.fullWidth}}return a.fullWidth>=d("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH?{width:a.fullWidth,height:a.fullHeight}:{width:d("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH,height:a.fullHeight}}function s(a){a.stopPropagation()}g["default"]=b}),98);
__d("WAWebViewOnceNux.react",["fbt","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebFlexItem.react","WAWebText.react","WAWebViewOnceSenderNuxIcon","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={graphic:{marginBottom:"xod5an3",$$css:!0}};function a(a){var b=a.onOkClick;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:b,cancelText:h._("__JHASH__RR1bpeluTQm__JHASH__"),onCancel:function(){d("WAWebExternalLink.react").openExternalLink(d("WAWebFaqUrl").getViewOnceFaqUrl())},children:j.jsxs(d("WAWebFlex.react").FlexColumn,{children:[j.jsx(c("WAWebFlexItem.react"),{xstyle:k.graphic,align:"center",children:j.jsx(d("WAWebViewOnceSenderNuxIcon").ViewOnceSenderNuxIcon,{width:130*1.5,height:118*1.5})}),j.jsx(d("WAWebText.react").WDSTextLarge,{children:a.isPhoto?h._("__JHASH__UWhvxP3VPGL__JHASH__"):h._("__JHASH__jx0k4EZR9wm__JHASH__")}),j.jsx(d("WAWebText.react").WDSTextMuted,{children:a.isPhoto?h._("__JHASH__MMJlhsBK-hI__JHASH__"):h._("__JHASH__emXrN7wWDpw__JHASH__")})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaViewerModal.react",["fbt","WALogger","WATypeUtils","WAWebChevronButton.react","WAWebClassnames","WAWebEmojiText.react","WAWebFocusTracer","WAWebFormatConfiguration","WAWebFrontendMsgGetters","WAWebGroupMetadataContext","WAWebKeyboardHotKeys.react","WAWebMarkPlayedMsgAction","WAWebMediaAudio.react","WAWebMediaData","WAWebMediaImage.react","WAWebMediaPanelHeader.react","WAWebMediaStage.react","WAWebMediaSticker.react","WAWebMediaTypes","WAWebMediaViewerConstants","WAWebMediaViewerMediaVideo.react","WAWebMediaViewerModal.scss","WAWebModalManager","WAWebMsgGetters","WAWebMsgLinks","WAWebMsgPhoneNumbers","WAWebNux","WAWebRound.react","WAWebText.react","WAWebTimeSpentLoggingNavigation","WAWebUimUie.react","WAWebUnstyledButton.react","WAWebVelocityAnimate","WAWebViewOnceNux.react","react","useWAWebModelValues","useWAWebMsgValues","useWAWebNux","useWAWebThrottledCallback"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["type: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Closed"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Opened"]);m=function(){return a};return a}b=j||d("react");var n=i||(i=c("react")),o=b.useEffect,p=b.useRef,q=b.useState,r={captionReadMoreBtn:{position:"x10l6tqk",end:"x1memqgq",left:null,right:null,bottom:"x1ey2m1c",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xurb0ha",backgroundColor:"x16ocsfn",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",boxShadow:"xg79jdd",$$css:!0},captionReadMoreBtnExpanded:{visibility:"xlshs6z",$$css:!0},captionReadMoreBtnZoomed:{visibility:"x1yn0zye",opacity:"xvdu4fi",$$css:!0}};function s(a){a==null?void 0:a.stopPropagation()}function a(a){var b,e=a.msg,f=a.onImageLoad,g=a.isAnimatingThumbs,i=a.onImgZoomIn,j=a.onExitAnimation,s=a.onBack;b=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(b=d("WAWebMsgGetters")).getId,b.getStar,d("WAWebFrontendMsgGetters").getIsUnsentMedia,b.getIsViewOnce,b.getIsStickerMsg,b.getHasThumbList,b.getCaption,b.getInteractiveAnnotations,b.getType,b.getMessageSecret]);var t=b[0];b[1];b[2];var u=b[3],ba=b[4],v=b[5],w=b[6];b[7];b[8];b[9];b=d("WAWebFrontendMsgGetters").getChat(e);var x=d("useWAWebModelValues").useModelValues(a.mediaData,["mediaStage","type","isGif"]),y=p(null),z=p(null),A=p(null),B=p(null),C=p(),D=p(!1),E=p(!1),F=p(!1),G=c("useWAWebNux")(d("WAWebNux").NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),H=G[0],ca=G[1],I=u&&H;G=q(function(){return x.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED&&a.getZoomNode?a.getZoomNode(t):null});var da=G[0];H=q(!1);var J=H[0],ea=H[1];G=q(!1);var fa=G[0],K=G[1],L=[c("WAWebMediaData").TYPE.IMAGE,c("WAWebMediaData").TYPE.STICKER].includes(x.type);H=q(L);var M=H[0],ga=H[1];G=q(!a.isAnimatingThumbs&&!M);var N=G[0],ha=G[1];H=q(!1);var O=H[0],ia=H[1];G=q(!1);H=G[0];var P=G[1],Q=function(){var a=n.jsx(c("WAWebViewOnceNux.react"),{isPhoto:x.type===c("WAWebMediaData").TYPE.IMAGE,onOkClick:function(){ca(),d("WAWebModalManager").ModalManager.close()}});d("WAWebModalManager").ModalManager.open(a)},R=c("useWAWebThrottledCallback")(function(a,b){if(fa)return;var e=y.current;if(!e)return;var f=e.getInsideContainer();if(!f||!(f instanceof HTMLElement))return;var g=e.getOutsideContainer();if(!g||!(g instanceof HTMLElement))return;e=e.getTranslatePosition(g,a,b);g=e.translateX;a=e.translateY;c("WAWebVelocityAnimate")(f,"stop");c("WAWebVelocityAnimate")(f,{translateX:g,translateY:a,scale:d("WAWebMediaViewerConstants").ZOOM_IN_FACTOR},{duration:0})});o(function(){d("WALogger").LOG(m());I&&Q();c("WAWebFocusTracer").focus(B.current);return function(){d("WALogger").LOG(l()),R.cancel()}},[]);G=function(){Q()};var ja=function(a,b){var e=b.getBoundingClientRect(),f=a.getBoundingClientRect(),g=f.top-e.top;f=f.left-e.left;e=a.clientWidth/b.clientWidth;var h=(b.clientHeight-a.clientHeight)/2;a=(b.clientWidth-a.clientWidth)/2;g-=h;f-=a;c("WAWebVelocityAnimate")(b,{opacity:[1,0],translateX:[0,f],translateY:[0,g],scale:[1,e]},{duration:d("WAWebMediaViewerConstants").ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){return ga(!1)});a=(h=A.current)==null?void 0:h.getElement();a&&c("WAWebVelocityAnimate")(a,{opacity:[1,0]},{duration:d("WAWebMediaViewerConstants").ANIMATION_DURATION})},S=function(){u&&d("WAWebMarkPlayedMsgAction").canMarkPlayed(e)&&d("WAWebMarkPlayedMsgAction").markPlayed(e)},T=function(a){S();f&&f();var b=da;a=a.target;if(!b||!a)return;if(!(a instanceof HTMLElement))return;if(F.current)return;F.current=!0;ja(b,a)},U=function(){if(D.current)return;D.current=!0;d("WATypeUtils").isFunction(j)&&j();var b=a.getZoomNode&&a.getZoomNode(t);if(!b)return s();var e;if(L&&y.current){var f;e=y.current.getInsideContainer();(f=y.current)==null?void 0:f.closingMediaZoomable()}else if(x.isGif&&z.current){e=z.current.getContainerElement();(f=z.current)==null?void 0:f.closingMedia()}if(!e)return s();f=e;var g=e.getBoundingClientRect(),h=b.getBoundingClientRect(),i=h.top-g.top;h=h.left-g.left;g=b.clientWidth/f.clientWidth;var k=(f.clientHeight-b.clientHeight)/2;f=(f.clientWidth-b.clientWidth)/2;i-=k;h-=f;c("WAWebVelocityAnimate")(e,{translateX:[h,0],translateY:[i,0],scale:[g,1]},{duration:d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){s()});k=(b=A.current)==null?void 0:b.getElement();k&&c("WAWebVelocityAnimate")(k,{opacity:[0,1]},{duration:d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})},V=function(b){var a=y.current;b&&a&&(E.current=a.getHeightOverflow()>0||a.getWidthOverflow()>0);ea(b);i(b)},ka=function(b){R.cancel();var a=y.current;a&&J&&a.onClick(b)},la=function(a){R(a.pageX,a.pageY)},ma=function(a){var b;b=(b=y.current)==null?void 0:b.getInsideContainer();b=Boolean(b==null?void 0:b.contains(document.activeElement));if(g||M||!b)return;R.cancel();b=y.current;b!=null&&b.onKeyboardZoom(a)},na=function(){P(!0)},oa=function(){P(!1)},W=function(){K(!0)},X=function(){K(!1)},Y=function(a){a.stopPropagation(),ia(!O)};o(function(){!N&&!g&&!M&&ha(!0)},[g,N,M]);d("WAWebTimeSpentLoggingNavigation").useTsNavigation({surface:"media-viewer"});var Z;switch(x.type){case c("WAWebMediaData").TYPE.IMAGE:Z=n.jsx(c("WAWebMediaImage.react"),{msg:e,mediaData:x,onLoad:T,onImgZoomIn:V,onAnnotationTooltipDisplay:W,onAnnotationTooltipDismiss:X,preventDownload:u,ref:y},t.toString());break;case c("WAWebMediaData").TYPE.STICKER:Z=n.jsx(c("WAWebMediaSticker.react"),{msg:e,mediaData:x,onLoad:T,onImgZoomIn:V,onStickerPackView:U,stickerPackViewDelay:d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,ref:y},t.toString());break;case c("WAWebMediaData").TYPE.VIDEO:Z=n.jsx(c("WAWebMediaViewerMediaVideo.react"),{autoPlay:!I,msg:e,mediaData:x,onLoadedData:x.isGif?T:S,startTime:a.startTime,onClose:U,ref:z},t.toString());break;case c("WAWebMediaData").TYPE.AUDIO:Z=n.jsx(c("WAWebMediaAudio.react"),{mediaData:x,msg:e},t.toString());break;default:d("WALogger").ERROR(k(),x.type).sendLogs("MediaViewerModal: unexpected media type")}var $;W=a.msgIndexInAlbum>=0&&a.albumSize>=0;if(w||W){var pa;W&&(pa=h._("__JHASH__q22HoNGNZoh__JHASH__",[h._param("number",a.msgIndexInAlbum+1),h._param("totalNumber",a.albumSize)]));X=d("WAWebFormatConfiguration").Conversation({mentions:e.mentionMap(),groupMentions:e.groupMentionMap(),phoneNumbers:d("WAWebMsgPhoneNumbers").getPhoneNumbersFromMsg(e),links:d("WAWebMsgLinks").getLinksFromMsg(e),trusted:!0,fromMe:t.fromMe,fromChatWid:t.remote,parseLists:!0,parseQuotes:!0,parseInlineCode:!0});V=x.type===c("WAWebMediaData").TYPE.IMAGE&&!u;T=!N&&(x.isGif||V);$=n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((W={},W[c("WAWebMediaViewerModal.scss").captionWrapperExpandable]=C.current===!0,W[c("WAWebMediaViewerModal.scss").captionWrapper]=!0,W)),onClick:C.current?Y:void 0,title:C.current?h._("__JHASH__YmkFxppzHPq__JHASH__"):void 0,"aria-hidden":O||void 0,children:[n.jsx(d("WAWebEmojiText.react").EmojiText,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((V={},V[c("WAWebMediaViewerModal.scss").captionHidden]=T,V[c("WAWebMediaViewerModal.scss").expanded]=O,V[c("WAWebMediaViewerModal.scss").mediaCaption]=!0,V)),formatters:X,ref:function(a){A.current=a},text:w||pa}),C.current&&n.jsx(c("WAWebUnstyledButton.react"),{xstyle:[r.captionReadMoreBtn,O&&r.captionReadMoreBtnExpanded,J&&r.captionReadMoreBtnZoomed],onClick:Y,children:n.jsx(d("WAWebText.react").TextSpan,{children:h._("__JHASH__YmkFxppzHPq__JHASH__")})})]}),O&&n.jsx("p",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaViewerModal.scss").captionWrapper,c("WAWebMediaViewerModal.scss").captionWrapperExpandable,c("WAWebMediaViewerModal.scss").captionExpanded),onClick:Y,children:n.jsx(d("WAWebEmojiText.react").EmojiText,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaViewerModal.scss").mediaCaption,c("WAWebMediaViewerModal.scss").mediaCaptionExpanded),formatters:X,text:w})})]})}T=d("WAWebClassnames").classnamesConvertMeToStylexPlease((W={},W[c("WAWebMediaViewerModal.scss").mediaWithCaption]=!!$,W[c("WAWebMediaViewerModal.scss").media]=!0,W));C=d("WAWebClassnames").classnamesConvertMeToStylexPlease((V={},V[c("WAWebMediaViewerModal.scss").noThumbnails]=!v,V[c("WAWebMediaViewerModal.scss").mediaViewerAnimate]=M||g,V[c("WAWebMediaViewerModal.scss").cursorZoomOut]=J,V.overlay=!0,V[c("WAWebMediaViewerModal.scss").mediaViewer]=!0,V));Y=J&&E.current?la:null;X=J?ka:null;w=J?null:U;w!=null&&u&&(w=na);return n.jsx(d("WAWebUimUie.react").UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:U,children:n.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{space:ma,enter:ma},ref:B,children:n.jsxs("div",{className:C,"data-animate-media-viewer":!0,"data-testid":void 0,onClick:X,onMouseMove:Y,children:[n.jsx(c("WAWebMediaPanelHeader.react"),{isHighlightClose:H,msg:e,mediaData:x,onClose:U,onHightlightCloseEnd:oa,onViewOnceInfoClick:G,msgIndexInAlbum:a.msgIndexInAlbum}),n.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((W={},W[c("WAWebMediaViewerModal.scss").sticker]=ba,W[c("WAWebMediaViewerModal.scss").mediaContent]=!0,W)),onClick:w,children:n.jsx(aa,{hasNavigationButtons:v,onNext:a.onNext,onPrev:a.onPrev,imgZoomed:J,children:n.jsxs("div",{className:T,children:[n.jsx(c("WAWebMediaStage.react"),{msg:e,mediaData:x}),Z,n.jsx(c("WAWebGroupMetadataContext").Provider,{value:b.groupMetadata,children:$})]})})})]})})})}a.displayName=a.name+" [from "+f.id+"]";function aa(a){var b;return n.jsxs(n.Fragment,{children:[a.hasNavigationButtons&&n.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaViewerModal.scss").btnMediaPrev),children:n.jsx("div",{onClick:a.onPrev?null:s,children:n.jsx(d("WAWebChevronButton.react").ChevronButton,{type:d("WAWebChevronButton.react").ButtonType.Prev,onClick:(b=a.onPrev)!=null?b:void 0,onKeyDown:(b=a.onPrev)!=null?b:void 0,disabled:!a.onPrev||a.imgZoomed,theme:d("WAWebRound.react").RoundTheme.Default})})}),a.children,a.hasNavigationButtons&&n.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaViewerModal.scss").btnMediaNext),children:n.jsx("div",{onClick:a.onPrev?null:s,children:n.jsx(d("WAWebChevronButton.react").ChevronButton,{type:d("WAWebChevronButton.react").ButtonType.Next,onClick:(b=a.onNext)!=null?b:void 0,onKeyDown:(b=a.onNext)!=null?b:void 0,disabled:!a.onNext||a.imgZoomed,theme:d("WAWebRound.react").RoundTheme.Default})})})]})}g["default"]=a}),98);
__d("WAMapsShallowEqual",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c;if(a.size!==b.size)return!1;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];c=b.get(g);if(c!==f||c===void 0&&!b.has(g))return!1}return!0}f["default"]=a}),66);
__d("WAWebThumbList.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={thumbsContainer:"_alip",scrollContainer:"_aliq",viewerThumbs:"_alir",mediaThumb:"_alin",thumbPadding:"_alio"};b=a;g["default"]=b}),98);
__d("WAWebThumbList.react",["fbt","WALogger","WAMapsShallowEqual","WAWebFocusTracer","WAWebMediaThumb.react","WAWebMsgGetters","WAWebSpinner.react","WAWebThumbList.scss","react","useWAWebPrevious","useWAWebThrottledCallback"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerFlow: attempted to render a msg without mediaData: ",""]);k=function(){return a};return a}e=j||d("react");var l=i||(i=c("react"));e.forwardRef;var m=e.useEffect,n=e.useImperativeHandle,o=e.useRef,p=e.useState;e=l.forwardRef(a);function a(a,b){var e=a.activeMsg,f=a.highlightedMsgIds,g=a.mediaMsgs,h=a.msgIdToPreferPreview,i=a.onSelectThumb,j=a.onSetActiveThumb,m=o({}),p=function(){var a=e.id.toString();a=m.current[a];a&&c("WAWebFocusTracer").focus(a)};n(b,function(){return{focusOnActive:p}});var q=f!=null&&f.size>0&&f.has(e.id.toString()),r=[],s=function(a,b){m.current[b]=a};g.forEach(function(a){if(a.mediaData==null){var b=e;d("WALogger").WARN(k(),JSON.stringify({type:a.type,isMedia:d("WAWebMsgGetters").getIsMedia(a),startMsgType:b.type,startMsgIsMedia:d("WAWebMsgGetters").getIsMedia(b)})).verbose();return}b=q&&f&&!f.has(a.id.toString())?"viewerFlowTransparent":"viewerFlow";r.push(l.jsx(d("WAWebMediaThumb.react").MediaThumb,{theme:b,active:a===e,msg:a,containerRef:function(b){s(b,a.id.toString()),a===e&&j(b)},onClick:function(){i(a)},preferPreview:!!h.get(a.id.toString()),showTooltip:d("WAWebMsgGetters").getIsGroupMsg(a)},"media-"+a.id.id))});r.push(l.jsx("div",{className:c("WAWebThumbList.scss").mediaThumb,children:g.queryMediaAfter?l.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-right"));r.unshift(l.jsx("div",{className:c("WAWebThumbList.scss").mediaThumb,children:g.queryMediaBefore?l.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-left"));r.push(l.jsx("div",{className:c("WAWebThumbList.scss").thumbPadding},"padding-right"));r.unshift(l.jsx("div",{className:c("WAWebThumbList.scss").thumbPadding},"padding-left"));return l.jsx(l.Fragment,{children:r})}a.displayName=a.name+" [from "+f.id+"]";var q=e;function b(a){var b=a.mediaMsgs,d=a.onScroll,e=a.activeMsg,f=o({}),g=o(null),i=o(null),j=c("useWAWebPrevious")(e.id),k=function(){var a;(a=g.current)==null?void 0:a.focusOnActive()};m(function(){var a;((a=i.current)==null?void 0:a.contains(document.activeElement))&&!e.id.equals(j)&&k()},[e,j]);var n=function(a){a=f.current[a];if(!a)return!1;a=a.getBoundingClientRect();a=(a.left+a.right)/2;a=a>-1*window.innerWidth&&a<2*window.innerWidth;return!a},r=function(){var a=new Map();b.forEach(function(b){b=b.id.toString();a.set(b,n(b))});return a},s=p(r),t=s[0],u=s[1],v=c("useWAWebThrottledCallback")(function(){var a=r();c("WAMapsShallowEqual")(t,a)||u(a)},100);s=function(a){v(),d(a)};return l.jsx("div",{className:c("WAWebThumbList.scss").thumbsContainer,ref:a.setRefThumbsContainer,children:l.jsx("div",{ref:i,className:c("WAWebThumbList.scss").scrollContainer,dir:"ltr",children:l.jsx("div",{role:"list","aria-label":h._("__JHASH__Rek6YqkEzt8__JHASH__"),tabIndex:1,onFocus:function(){k()},onScroll:s,className:c("WAWebThumbList.scss").viewerThumbs,ref:a.setRefThumbs,children:l.jsx(q,{ref:g,mediaMsgs:b,highlightedMsgIds:a.highlightedMsgIds,activeMsg:a.activeMsg,onSetActiveThumb:a.onSetActiveThumb,onSelectThumb:a.onSelectThumb,msgIdToPreferPreview:t})})})})}b.displayName=b.name+" [from "+f.id+"]";g["default"]=b}),98);
__d("WAWebMediaViewerFlow.react",["Keys","WALogger","WANullthrows","WAWebCarouselMsgUtils","WAWebChatMedia","WAWebFrontendConstants","WAWebFrontendMsgGetters","WAWebL10N","WAWebMediaTypes","WAWebMediaViewerModal.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebMsgGetters","WAWebMsgType","WAWebSuspendedGroupUtils","WAWebThumbList.react","WAWebUiActionWamEvent","WAWebVelocityAnimate","WAWebWamEnumUiActionType","WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE","WAWebWamPrivateStatsUtils","react","useWAWebForceUpdate","useWAWebLazyRef","useWAWebListener","useWAWebPrevious","useWAWebStableCallback","useWAWebThrottledCallback","useWAWebUiIdle","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "]);k=function(){return a};return a}b=i||d("react");var l=h||(h=c("react")),m=b.useEffect,n=b.useRef,o=b.useState;function a(a){var b=a.msg,e=a.highlightedMsgIds,f=c("useWAWebUnmountSignal")(),g=c("useWAWebUiIdle")(),h=c("useWAWebForceUpdate")(),i=c("useWAWebLazyRef")(function(){return b.type===d("WAWebMsgType").MSG_TYPE.IMAGE?new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:b.mediaData.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED}):null}),q=c("useWAWebLazyRef")(function(){var a=b;if(b.isCarouselCard){var c;a=(c=d("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(b))!=null?c:b}return d("WAWebChatMedia").constructMediaMsgs(d("WAWebFrontendMsgGetters").getChat(a),a)}),r=q.current.length,s=c("useWAWebPrevious")(r),t=n(null),u=n(),v=n(),w=n(null),x=n(null),y=n(null),z=o(b),A=z[0],B=z[1];z=o(!1);var C=z[0],D=z[1];z=o(p(A));var E=z[0],F=z[1],G=c("useWAWebPrevious")(A),H=function(a){a===void 0&&(a=!1);var b=x.current,d=y.current,e=w.current;if(!b||!d||!e)return;var f=0;e instanceof HTMLElement&&(f=e.clientWidth/2-b.clientWidth/2);c("WAWebVelocityAnimate")(d,"stop");b=0;a&&(b=300);c("WAWebVelocityAnimate")(e,"scroll",{duration:b,container:d,offset:f,axis:"x",easing:[.1,.82,.25,1]})};m(function(){var a=function(a){if(!a)return;c("WAWebVelocityAnimate")(a,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then(function(){if(f.aborted)return;F(!1)})};H();p(b)&&a(x.current)},[]);m(function(){var a;r>((a=s)!=null?a:0)&&H()});var I=function(a){g(function(){q.current.loadMoreAroundIfNeeded(a)}),B(a)};z=function(){var a=-1;if(!e||!A)return a;var b=A.id.toString();if(!e.has(b))return a;var c=0;e.forEach(function(d){d===b&&(a=c),c++});return a};var J=function a(c){c&&c.stopPropagation();if(C)return;c=A;if(!c)return;c=q.current.getAfter(c);if(c){I(c);return}if(!q.current.hasMediaAfter)return;if(u.current)return;u.current=q.current.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(b),msg:b,direction:"after"}).then(function(c){if(f.aborted)return;typeof c.length==="number"&&c.length>0&&A===b&&a()})["catch"](function(a){d("WALogger").WARN(k()).devConsole(a)})["finally"](function(){u.current=null})},K=function a(c){c&&c.stopPropagation();if(C)return;c=A;if(!c)return;c=q.current.getBefore(c);if(c){I(c);return}if(!q.current.hasMediaBefore)return;if(v.current)return;v.current=q.current.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(b),msg:b,direction:"before"}).then(function(c){if(f.aborted)return;typeof c.length==="number"&&c.length>0&&A===b&&a()})["catch"](function(a){d("WALogger").WARN(j()).devConsole(a)})["finally"](function(){v.current=null})},L=function(a){if(a.defaultPrevented)return;if(A&&!p(A))return;var b=c("WAWebL10N").isRTL();a.keyCode===c("Keys").LEFT?b?J():K():a.keyCode===c("Keys").RIGHT&&(b?K():J())},M=null;b.type===d("WAWebMsgType").MSG_TYPE.IMAGE&&(M=function(){var a=i.current;if(a){var c;Object.assign(a,d("WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE").getGroupCountMetricsFromChatWid((c=d("WAWebFrontendMsgGetters").getChat(b))==null?void 0:c.id));a.markUiActionT();a.commit();i.current=null}d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents()});var N=function(a){D(a)},O=function(){d("WAWebModalManager").ModalManager.closeMedia()},P=function(){var a=function(a){if(!a)return;c("WAWebVelocityAnimate")(a,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})};p(b)&&a(x.current)},Q=c("useWAWebStableCallback")(function(){B(null),O()});d("useWAWebListener").useListener(p(A)?null:A,"revoked",Q);Q=p(A)?q.current:null;d("useWAWebListener").useListener(Q,"remove",function(a,b,d){b=q.current;var e=A;if(b.includes(a)||e!=null&&e.id!=null&&e.id.toString()!==a.id.toString()){h();return}e=d.index;b.length===0?O():b.length===e?I(c("WANullthrows")(b.at(e-1))):I(c("WANullthrows")(b.at(e)))});d("useWAWebListener").useListener(Q,"reset",function(){O()});d("useWAWebListener").useListener(Q,"query_media_after",function(){h()});d("useWAWebListener").useListener(Q,"query_media_before",function(){var a=y.current;if(!a)return;t.current=a.scrollWidth;a instanceof HTMLElement&&h()});d("useWAWebListener").useListener(window,"keydown",L);m(function(){g(function(){if(!A)return;q.current.loadMoreAroundIfNeeded(A)})},[A,q,g]);m(function(){if(G!==A)H(!0);else{var a=y.current;if(!a||t.current==null||t.current===0)return;a instanceof HTMLElement&&(a.scrollLeft+=a.scrollWidth-t.current);t.current=null}},[A,G]);Q=function(a,b,e){if(b.length===0)return;if(e==null)return;if(b.hasMediaBefore&&e<a.clientWidth){var f=c("WANullthrows")(b.head());g(function(){b.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(f),msg:f}),h()})}if(b.hasMediaAfter&&e+d("WAWebFrontendConstants").SCROLL_FUDGE>a.scrollWidth-2*a.clientWidth){var i=c("WANullthrows")(b.last());g(function(){b.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(i),msg:i,direction:"after"}),h()})}};var R=c("useWAWebThrottledCallback")(Q,100);L=function(a){R(a.currentTarget,q.current,a.currentTarget.scrollLeft)};if(!A)return null;if(d("WAWebFrontendMsgGetters").getChat(b).isSuspendedOrTerminated()&&d("WAWebMiscGatingUtils").isGroupSuspendV2Enabled()){d("WAWebSuspendedGroupUtils").openSuspendedGroupMediaDownloadFailureModal();return}Q=q.current;var S=Q.last();S=Q.hasMediaAfter||A!==S?J:null;var T=Q.head();Q=Q.hasMediaBefore||A!==T?K:null;return l.jsxs("div",{className:C?"img-zoomed-in":null,children:[d("WAWebMsgGetters").getHasThumbList(A)&&l.jsx(c("WAWebThumbList.react"),{activeMsg:A,mediaMsgs:q.current,highlightedMsgIds:a.highlightedMsgIds,onSelectThumb:I,onSetActiveThumb:function(a){w.current=a},onScroll:L,setRefThumbsContainer:function(a){x.current=a},setRefThumbs:function(a){y.current=a}}),l.jsx(c("WAWebMediaViewerModal.react"),{msg:A,mediaData:A.mediaData,onBack:O,onExitAnimation:P,onNext:S,onPrev:Q,onImgZoomIn:N,getZoomNode:a.getZoomNode,startTime:a.startTime,isAnimatingThumbs:E,onImageLoad:M,msgIndexInAlbum:z(),albumSize:((T=a.highlightedMsgIds)==null?void 0:T.size)||0})]})}a.displayName=a.name+" [from "+f.id+"]";function p(a){return!a?!0:d("WAWebMsgGetters").getHasThumbList(a)}g["default"]=a}),98);